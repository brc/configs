# prefix key
#
set-option -g prefix M-t
unbind-key C-b
bind-key M-t send-prefix

# make 256 colors work better
#
set-option -g default-terminal "screen-256color"

# make Function keys work better
#
set-option -g xterm-keys on

# don't let rampant stdout overwhelm us -
#
#   If we see 100 C0 sequences (backspace, newline, etc) within 1 millisecond,
#   then only update the pane every 100 milliseconds (interval).
#
# XXX these options have been removed from tmux for v2.1
#set-window-option c0-change-trigger  100
#set-window-option c0-change-interval 100

# UTF-8
#
# XXX setting these options alone was not enough to make UTF-8 work, so I have
#     to invoke tmux with the -u flag to force a UTF-8 terminal
#
#set-window-option -g utf8 on
#set-option -g status-utf8 on

# Copy/paste
bind-key M-t copy-mode
bind-key M-h paste-buffer
#bind C-y run-shell "tmux show-buffer |xclip -i -selection c,p"

# Emulate vi for visual selection and yank
#
# NB: Fundamental change to how copy mode key bindings work
#     (See https://github.com/tmux/tmux/commit/76d6d36):
#
#       OLD SYNTAX:
#         bind-key -t vi-copy v begin-selection
#         bind-key -t vi-copy y copy-selection
#         bind-key -t vi-copy C-v rectangle-toggle
#         unbind-key -t vi-copy Enter
#
# NEW SYNTAX:
bind-key -T copy-mode-vi v send -X begin-selection
bind-key -T copy-mode-vi y send -X copy-selection
bind-key -T copy-mode-vi C-v send -X rectangle-toggle
unbind-key -T copy-mode-vi Enter

# window/pane mgmt
#
bind | split-window -h
bind - split-window -v
unbind '"'
unbind % 
bind-key M-p previous-window
bind-key M-n next-window
bind-key L last-window
bind-key t last-pane
# moving between panes with vi movement keys
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
bind-key ! break-pane -d
bind-key & command-prompt -p "join pane:" "join-pane -s ':%%'"
set-option -g display-panes-time 3000

# colors
#
# status bar
set-option -g status-fg colour249
set-option -g status-bg colour234

# window list
set-window-option -g window-status-bg black
set-window-option -g window-status-fg colour231
set-window-option -g window-status-attr dim

# current window
set-window-option -g window-status-current-bg cyan
set-window-option -g window-status-current-fg white
set-window-option -g window-status-current-attr bright

# action monitors
set-window-option -g window-status-activity-fg yellow
set-window-option -g window-status-activity-attr none
set-window-option -g window-status-bell-fg red
set-window-option -g window-status-bell-attr none

# command line
#set-option -g message-command-bg black     # vi command mode?
#set-option -g message-command-fg white     #
#set-option -g message-command-attr bright  #
set-option -g message-bg black
set-option -g message-fg white
set-option -g message-attr dim

# misc
#
set-option -g buffer-limit 50
set-option -g history-limit 10000
set-option -g set-clipboard on
set-option -g set-titles on
set-option -g word-separators " /-_@|;:&[](){},="
set-option -g wrap-search off
